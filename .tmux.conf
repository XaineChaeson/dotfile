##### ===== 基础 ===== #####
set -g history-limit 200000
set -sg escape-time 0
setw -g mode-keys vi

# mouse开关（必须，否则 WindTerm 不发滚轮事件）
set -g mouse off


##### ===== 一键切换 mouse：prefix + m =====
unbind-key -T prefix m
bind-key  -T prefix m run-shell 'tmux if-shell -F "#{mouse}" "set -g mouse off; display-message \"mouse: OFF (WindTerm drag-select)\"" "set -g mouse on; display-message \"mouse: ON (wheel scroll tmux panes)\""'

# mouse=ON 时滚轮滚 tmux 历史（更强制）
bind-key -n WheelUpPane   if-shell -F '#{mouse}' 'copy-mode -e; send -M' ''
bind-key -n WheelDownPane if-shell -F '#{mouse}' 'send -M' ''

##### ===== 可选：进入 copy-mode（键盘）=====
# prefix + [ 进入 copy-mode（tmux 默认就有，这里不必再绑）
# Vim 风格选择/复制（复制到 tmux buffer，不强求进 Windows 剪贴板）
bind-key -T copy-mode-vi v send -X begin-selection
bind-key -T copy-mode-vi V send -X select-line
bind-key -T copy-mode-vi y send -X copy-selection-and-cancel


##### ===== pane 快速切换（vim 风格）===== #####
# 注意：这是 prefix + h/j/k/l
unbind-key -T prefix h
unbind-key -T prefix j
unbind-key -T prefix k
unbind-key -T prefix l

bind-key -T prefix h select-pane -L
bind-key -T prefix j select-pane -D
bind-key -T prefix k select-pane -U
bind-key -T prefix l select-pane -R

##### ===== pane 快速 resize（vim 风格）===== #####
bind-key -r -T prefix H resize-pane -L 5
bind-key -r -T prefix L resize-pane -R 5
bind-key -r -T prefix J resize-pane -D 5
bind-key -r -T prefix K resize-pane -U 5

##### ===== pane 全屏切换 ===== #####
bind-key -T prefix z resize-pane -Z

##### ===== 重新加载配置（可选，强烈推荐）===== #####
bind-key -T prefix R source-file ~/.tmux.conf \; display-message "reloaded ~/.tmux.conf"

